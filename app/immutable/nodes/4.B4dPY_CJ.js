import{a as ct,t as lt}from"../chunks/disclose-version.DixJy8GR.js";import{ad as wn,n as bt,I as Mn,at as Tn,ap as bn,S as Cn,J as kn,_ as xn,p as Jt,x as Xt,as as _n,e as Dn,Y as Ct,h as ae,A as O,y as q,au as ge,z as J}from"../chunks/runtime.Dht5-6VJ.js";import{s as Te}from"../chunks/attributes.xNdSRM4S.js";import{p as et,a as ze}from"../chunks/props.s3y_U67h.js";import{o as Qt,b as Kt}from"../chunks/index-client.CCAHX4S7.js";import{c as Un,i as tt,a as kt,b as xt,d as Sn,s as Fe}from"../chunks/transform.CzLan8xH.js";import{b as me}from"../chunks/paths.Bp8VozgT.js";function An(e,t,n){bt&&Mn();var r=e,i=xn,a;wn(()=>{Tn(i,i=t())&&(a&&bn(a),a=Cn(()=>n(r)))}),bt&&(r=kn)}function De(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ft(e){let t,n,r;e.length!==2?(t=De,n=(u,c)=>De(e(u),c),r=(u,c)=>e(u)-c):(t=e===De||e===Fn?e:Nn,n=e,r=e);function i(u,c,s=0,h=u.length){if(s<h){if(t(c,c)!==0)return h;do{const l=s+h>>>1;n(u[l],c)<0?s=l+1:h=l}while(s<h)}return s}function a(u,c,s=0,h=u.length){if(s<h){if(t(c,c)!==0)return h;do{const l=s+h>>>1;n(u[l],c)<=0?s=l+1:h=l}while(s<h)}return s}function o(u,c,s=0,h=u.length){const l=i(u,c,s,h-1);return l>s&&r(u[l-1],c)>-r(u[l],c)?l-1:l}return{left:i,center:o,right:a}}function Nn(){return 0}function Yn(e){return e===null?NaN:+e}const $n=ft(De),In=$n.right;ft(Yn).center;class nt extends Map{constructor(t,n=En){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(_t(this,t))}has(t){return super.has(_t(this,t))}set(t,n){return super.set(Ln(this,t),n)}delete(t){return super.delete(Wn(this,t))}}function _t({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ln({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Wn({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function En(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Pn(e){return e}function jn(e,t,...n){return Hn(e,Pn,t,n)}function Hn(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const u=new nt,c=r[o++];let s=-1;for(const h of a){const l=c(h,++s,a),f=u.get(l);f?f.push(h):u.set(l,[h])}for(const[h,l]of u)u.set(h,i(l,o));return t(u)}(e,0)}const Rn=Math.sqrt(50),zn=Math.sqrt(10),On=Math.sqrt(2);function Ne(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Rn?10:a>=zn?5:a>=On?2:1;let u,c,s;return i<0?(s=Math.pow(10,-i)/o,u=Math.round(e*s),c=Math.round(t*s),u/s<e&&++u,c/s>t&&--c,s=-s):(s=Math.pow(10,i)*o,u=Math.round(e/s),c=Math.round(t/s),u*s<e&&++u,c*s>t&&--c),c<u&&.5<=n&&n<2?Ne(e,t,n*2):[u,c,s]}function Vn(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Ne(t,e,n):Ne(e,t,n);if(!(a>=i))return[];const u=a-i+1,c=new Array(u);if(r)if(o<0)for(let s=0;s<u;++s)c[s]=(a-s)/-o;else for(let s=0;s<u;++s)c[s]=(a-s)*o;else if(o<0)for(let s=0;s<u;++s)c[s]=(i+s)/-o;else for(let s=0;s<u;++s)c[s]=(i+s)*o;return c}function rt(e,t,n){return t=+t,e=+e,n=+n,Ne(e,t,n)[2]}function it(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?rt(t,e,n):rt(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Gn(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Dt(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Bn(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Zn(e,t=De){if(t.length===1)return Bn(e,t);let n,r=-1,i=-1;for(const a of e)++i,(r<0?t(a,a)===0:t(a,n)<0)&&(n=a,r=i);return r}function qn(e){return e}var Oe=1,Ve=2,at=3,_e=4,Ut=1e-6;function Jn(e){return"translate("+e+",0)"}function Xn(e){return"translate(0,"+e+")"}function Qn(e){return t=>+e(t)}function Kn(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function er(){return!this.__axis}function en(e,t){var n=[],r=null,i=null,a=6,o=6,u=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=e===Oe||e===_e?-1:1,h=e===_e||e===Ve?"x":"y",l=e===Oe||e===at?Jn:Xn;function f(m){var y=r??(t.ticks?t.ticks.apply(t,n):t.domain()),T=i??(t.tickFormat?t.tickFormat.apply(t,n):qn),U=Math.max(a,0)+u,b=t.range(),F=+b[0]+c,x=+b[b.length-1]+c,S=(t.bandwidth?Kn:Qn)(t.copy(),c),k=m.selection?m.selection():m,p=k.selectAll(".domain").data([null]),M=k.selectAll(".tick").data(y,t).order(),$=M.exit(),G=M.enter().append("g").attr("class","tick"),W=M.select("line"),v=M.select("text");p=p.merge(p.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(G),W=W.merge(G.append("line").attr("stroke","currentColor").attr(h+"2",s*a)),v=v.merge(G.append("text").attr("fill","currentColor").attr(h,s*U).attr("dy",e===Oe?"0em":e===at?"0.71em":"0.32em")),m!==k&&(p=p.transition(m),M=M.transition(m),W=W.transition(m),v=v.transition(m),$=$.transition(m).attr("opacity",Ut).attr("transform",function(Y){return isFinite(Y=S(Y))?l(Y+c):this.getAttribute("transform")}),G.attr("opacity",Ut).attr("transform",function(Y){var N=this.parentNode.__axis;return l((N&&isFinite(N=N(Y))?N:S(Y))+c)})),$.remove(),p.attr("d",e===_e||e===Ve?o?"M"+s*o+","+F+"H"+c+"V"+x+"H"+s*o:"M"+c+","+F+"V"+x:o?"M"+F+","+s*o+"V"+c+"H"+x+"V"+s*o:"M"+F+","+c+"H"+x),M.attr("opacity",1).attr("transform",function(Y){return l(S(Y)+c)}),W.attr(h+"2",s*a),v.attr(h,s*U).text(T),k.filter(er).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ve?"start":e===_e?"end":"middle"),k.each(function(){this.__axis=S})}return f.scale=function(m){return arguments.length?(t=m,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),f):n.slice()},f.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),f):r&&r.slice()},f.tickFormat=function(m){return arguments.length?(i=m,f):i},f.tickSize=function(m){return arguments.length?(a=o=+m,f):a},f.tickSizeInner=function(m){return arguments.length?(a=+m,f):a},f.tickSizeOuter=function(m){return arguments.length?(o=+m,f):o},f.tickPadding=function(m){return arguments.length?(u=+m,f):u},f.offset=function(m){return arguments.length?(c=+m,f):c},f}function tr(e){return en(at,e)}function nr(e){return en(_e,e)}function rr(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ir(e,t){if(e=rr(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function ar(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function or(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function sr(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=ht(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function ur(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function cr(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ht(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}function ht(e,t){var n=typeof t,r;return t==null||n==="boolean"?Un(t):(n==="number"?tt:n==="string"?(r=kt(t))?(t=r,xt):Sn:t instanceof kt?xt:t instanceof Date?ur:or(t)?ar:Array.isArray(t)?sr:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?cr:tt)(e,t)}function lr(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}const ot=Math.PI,st=2*ot,oe=1e-6,fr=st-oe;function tn(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hr(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tn;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class gr{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tn:hr(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,c=r-t,s=i-n,h=o-t,l=u-n,f=h*h+l*l;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>oe)if(!(Math.abs(l*c-s*h)>oe)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,y=i-u,T=c*c+s*s,U=m*m+y*y,b=Math.sqrt(T),F=Math.sqrt(f),x=a*Math.tan((ot-Math.acos((T+f-U)/(2*b*F)))/2),S=x/F,k=x/b;Math.abs(S-1)>oe&&this._append`L${t+S*h},${n+S*l}`,this._append`A${a},${a},0,0,${+(l*m>h*y)},${this._x1=t+k*c},${this._y1=n+k*s}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),c=r*Math.sin(i),s=t+u,h=n+c,l=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${s},${h}`:(Math.abs(this._x1-s)>oe||Math.abs(this._y1-h)>oe)&&this._append`L${s},${h}`,r&&(f<0&&(f=f%st+st),f>fr?this._append`A${r},${r},0,1,${l},${t-u},${n-c}A${r},${r},0,1,${l},${this._x1=s},${this._y1=h}`:f>oe&&this._append`A${r},${r},0,${+(f>=ot)},${l},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}var St={},Ge={},Be=34,be=10,Ze=13;function nn(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function mr(e,t){var n=nn(e);return function(r,i){return t(n(r),i,e)}}function At(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function P(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function dr(e){return e<0?"-"+P(-e,6):e>9999?"+"+P(e,6):P(e,4)}function pr(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":dr(e.getUTCFullYear())+"-"+P(e.getUTCMonth()+1,2)+"-"+P(e.getUTCDate(),2)+(i?"T"+P(t,2)+":"+P(n,2)+":"+P(r,2)+"."+P(i,3)+"Z":r?"T"+P(t,2)+":"+P(n,2)+":"+P(r,2)+"Z":n||t?"T"+P(t,2)+":"+P(n,2)+"Z":"")}function yr(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(l,f){var m,y,T=i(l,function(U,b){if(m)return m(U,b-1);y=U,m=f?mr(U,f):nn(U)});return T.columns=y||[],T}function i(l,f){var m=[],y=l.length,T=0,U=0,b,F=y<=0,x=!1;l.charCodeAt(y-1)===be&&--y,l.charCodeAt(y-1)===Ze&&--y;function S(){if(F)return Ge;if(x)return x=!1,St;var p,M=T,$;if(l.charCodeAt(M)===Be){for(;T++<y&&l.charCodeAt(T)!==Be||l.charCodeAt(++T)===Be;);return(p=T)>=y?F=!0:($=l.charCodeAt(T++))===be?x=!0:$===Ze&&(x=!0,l.charCodeAt(T)===be&&++T),l.slice(M+1,p-1).replace(/""/g,'"')}for(;T<y;){if(($=l.charCodeAt(p=T++))===be)x=!0;else if($===Ze)x=!0,l.charCodeAt(T)===be&&++T;else if($!==n)continue;return l.slice(M,p)}return F=!0,l.slice(M,y)}for(;(b=S())!==Ge;){for(var k=[];b!==St&&b!==Ge;)k.push(b),b=S();f&&(k=f(k,U++))==null||m.push(k)}return m}function a(l,f){return l.map(function(m){return f.map(function(y){return h(m[y])}).join(e)})}function o(l,f){return f==null&&(f=At(l)),[f.map(h).join(e)].concat(a(l,f)).join(`
`)}function u(l,f){return f==null&&(f=At(l)),a(l,f).join(`
`)}function c(l){return l.map(s).join(`
`)}function s(l){return l.map(h).join(e)}function h(l){return l==null?"":l instanceof Date?pr(l):t.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l}return{parse:r,parseRows:i,format:o,formatBody:u,formatRows:c,formatRow:s,formatValue:h}}var vr=yr(","),wr=vr.parse;function Mr(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Tr(e,t){return fetch(e,t).then(Mr)}function br(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Tr(t,n).then(function(i){return e(i,r)})}}var Cr=br(wr);function kr(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ye(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ye(e){return e=Ye(Math.abs(e)),e?e[1]:NaN}function xr(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),a.push(n.substring(i-=u,i+u)),!((c+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function _r(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Dr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $e(e){if(!(t=Dr.exec(e)))throw new Error("invalid format: "+e);var t;return new gt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$e.prototype=gt.prototype;function gt(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ur(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var rn;function Sr(e,t){var n=Ye(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(rn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ye(e,Math.max(0,t+a-1))[0]}function Ft(e,t){var n=Ye(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Nt={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:kr,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ft(e*100,t),r:Ft,s:Sr,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Yt(e){return e}var $t=Array.prototype.map,It=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ar(e){var t=e.grouping===void 0||e.thousands===void 0?Yt:xr($t.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Yt:_r($t.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function s(l){l=$e(l);var f=l.fill,m=l.align,y=l.sign,T=l.symbol,U=l.zero,b=l.width,F=l.comma,x=l.precision,S=l.trim,k=l.type;k==="n"?(F=!0,k="g"):Nt[k]||(x===void 0&&(x=12),S=!0,k="g"),(U||f==="0"&&m==="=")&&(U=!0,f="0",m="=");var p=T==="$"?n:T==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",M=T==="$"?r:/[%p]/.test(k)?o:"",$=Nt[k],G=/[defgprs%]/.test(k);x=x===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function W(v){var Y=p,N=M,B,le,Z;if(k==="c")N=$(v)+N,v="";else{v=+v;var j=v<0||1/v<0;if(v=isNaN(v)?c:$(Math.abs(v),x),S&&(v=Ur(v)),j&&+v==0&&y!=="+"&&(j=!1),Y=(j?y==="("?y:u:y==="-"||y==="("?"":y)+Y,N=(k==="s"?It[8+rn/3]:"")+N+(j&&y==="("?")":""),G){for(B=-1,le=v.length;++B<le;)if(Z=v.charCodeAt(B),48>Z||Z>57){N=(Z===46?i+v.slice(B+1):v.slice(B))+N,v=v.slice(0,B);break}}}F&&!U&&(v=t(v,1/0));var ne=Y.length+v.length+N.length,H=ne<b?new Array(b-ne+1).join(f):"";switch(F&&U&&(v=t(H+v,H.length?b-N.length:1/0),H=""),m){case"<":v=Y+v+N+H;break;case"=":v=Y+H+v+N;break;case"^":v=H.slice(0,ne=H.length>>1)+Y+v+N+H.slice(ne);break;default:v=H+Y+v+N;break}return a(v)}return W.toString=function(){return l+""},W}function h(l,f){var m=s((l=$e(l),l.type="f",l)),y=Math.max(-8,Math.min(8,Math.floor(ye(f)/3)))*3,T=Math.pow(10,-y),U=It[8+y/3];return function(b){return m(T*b)+U}}return{format:s,formatPrefix:h}}var Ae,an,on;Fr({thousands:",",grouping:[3],currency:["$",""]});function Fr(e){return Ae=Ar(e),an=Ae.format,on=Ae.formatPrefix,Ae}function Nr(e){return Math.max(0,-ye(Math.abs(e)))}function Yr(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ye(t)/3)))*3-ye(Math.abs(e)))}function $r(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ye(t)-ye(e))+1}function mt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Lt=Symbol("implicit");function dt(){var e=new nt,t=[],n=[],r=Lt;function i(a){let o=e.get(a);if(o===void 0){if(r!==Lt)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new nt;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return dt(t,n).unknown(r)},mt.apply(i,arguments),i}function Ir(e){return function(){return e}}function Lr(e){return+e}var Wt=[0,1];function de(e){return e}function ut(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ir(isNaN(t)?NaN:.5)}function Wr(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Er(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=ut(i,r),a=n(o,a)):(r=ut(r,i),a=n(a,o)),function(u){return a(r(u))}}function Pr(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=ut(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var c=In(e,u,1,r)-1;return a[c](i[c](u))}}function sn(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function jr(){var e=Wt,t=Wt,n=ht,r,i,a,o=de,u,c,s;function h(){var f=Math.min(e.length,t.length);return o!==de&&(o=Wr(e[0],e[f-1])),u=f>2?Pr:Er,c=s=null,l}function l(f){return f==null||isNaN(f=+f)?a:(c||(c=u(e.map(r),t,n)))(r(o(f)))}return l.invert=function(f){return o(i((s||(s=u(t,e.map(r),tt)))(f)))},l.domain=function(f){return arguments.length?(e=Array.from(f,Lr),h()):e.slice()},l.range=function(f){return arguments.length?(t=Array.from(f),h()):t.slice()},l.rangeRound=function(f){return t=Array.from(f),n=lr,h()},l.clamp=function(f){return arguments.length?(o=f?!0:de,h()):o!==de},l.interpolate=function(f){return arguments.length?(n=f,h()):n},l.unknown=function(f){return arguments.length?(a=f,l):a},function(f,m){return r=f,i=m,h()}}function un(){return jr()(de,de)}function Hr(e,t,n,r){var i=it(e,t,n),a;switch(r=$e(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Yr(i,o))&&(r.precision=a),on(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=$r(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Nr(i))&&(r.precision=a-(r.type==="%")*2);break}}return an(r)}function Rr(e){var t=e.domain;return e.ticks=function(n){var r=t();return Vn(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Hr(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],u=r[a],c,s,h=10;for(u<o&&(s=o,o=u,u=s,s=i,i=a,a=s);h-- >0;){if(s=rt(o,u,n),s===c)return r[i]=o,r[a]=u,t(r);if(s>0)o=Math.floor(o/s)*s,u=Math.ceil(u/s)*s;else if(s<0)o=Math.ceil(o*s)/s,u=Math.floor(u*s)/s;else break;c=s}return e},e}function cn(){var e=un();return e.copy=function(){return sn(e,cn())},mt.apply(e,arguments),Rr(e)}function zr(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}const qe=new Date,Je=new Date;function I(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const c=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return c;let s;do c.push(s=new Date(+a)),t(a,u),e(a);while(s<a&&a<o);return c},i.filter=a=>I(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(qe.setTime(+a),Je.setTime(+o),e(qe),e(Je),Math.floor(n(qe,Je))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Ie=I(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ie.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?I(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ie);Ie.range;const Q=1e3,V=Q*60,K=V*60,ee=K*24,pt=ee*7,Et=ee*30,Xe=ee*365,pe=I(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Q)},(e,t)=>(t-e)/Q,e=>e.getUTCSeconds());pe.range;const yt=I(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Q)},(e,t)=>{e.setTime(+e+t*V)},(e,t)=>(t-e)/V,e=>e.getMinutes());yt.range;const Or=I(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*V)},(e,t)=>(t-e)/V,e=>e.getUTCMinutes());Or.range;const vt=I(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Q-e.getMinutes()*V)},(e,t)=>{e.setTime(+e+t*K)},(e,t)=>(t-e)/K,e=>e.getHours());vt.range;const Vr=I(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*K)},(e,t)=>(t-e)/K,e=>e.getUTCHours());Vr.range;const Ue=I(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*V)/ee,e=>e.getDate()-1);Ue.range;const wt=I(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ee,e=>e.getUTCDate()-1);wt.range;const Gr=I(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ee,e=>Math.floor(e/ee));Gr.range;function ue(e){return I(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*V)/pt)}const Ee=ue(0),Le=ue(1),Br=ue(2),Zr=ue(3),ve=ue(4),qr=ue(5),Jr=ue(6);Ee.range;Le.range;Br.range;Zr.range;ve.range;qr.range;Jr.range;function ce(e){return I(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/pt)}const ln=ce(0),We=ce(1),Xr=ce(2),Qr=ce(3),we=ce(4),Kr=ce(5),ei=ce(6);ln.range;We.range;Xr.range;Qr.range;we.range;Kr.range;ei.range;const Mt=I(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Mt.range;const ti=I(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ti.range;const te=I(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());te.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:I(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});te.range;const se=I(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());se.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:I(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});se.range;function ni(e,t,n,r,i,a){const o=[[pe,1,Q],[pe,5,5*Q],[pe,15,15*Q],[pe,30,30*Q],[a,1,V],[a,5,5*V],[a,15,15*V],[a,30,30*V],[i,1,K],[i,3,3*K],[i,6,6*K],[i,12,12*K],[r,1,ee],[r,2,2*ee],[n,1,pt],[t,1,Et],[t,3,3*Et],[e,1,Xe]];function u(s,h,l){const f=h<s;f&&([s,h]=[h,s]);const m=l&&typeof l.range=="function"?l:c(s,h,l),y=m?m.range(s,+h+1):[];return f?y.reverse():y}function c(s,h,l){const f=Math.abs(h-s)/l,m=ft(([,,U])=>U).right(o,f);if(m===o.length)return e.every(it(s/Xe,h/Xe,l));if(m===0)return Ie.every(Math.max(it(s,h,l),1));const[y,T]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return y.every(T)}return[u,c]}const[ri,ii]=ni(te,Mt,Ee,Ue,vt,yt);function Qe(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ke(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ce(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function ai(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,c=e.shortMonths,s=ke(i),h=xe(i),l=ke(a),f=xe(a),m=ke(o),y=xe(o),T=ke(u),U=xe(u),b=ke(c),F=xe(c),x={a:j,A:ne,b:H,B:Pe,c:null,d:Ot,e:Ot,f:Ui,g:Ei,G:ji,H:xi,I:_i,j:Di,L:fn,m:Si,M:Ai,p:w,q:X,Q:Bt,s:Zt,S:Fi,u:Ni,U:Yi,V:$i,w:Ii,W:Li,x:null,X:null,y:Wi,Y:Pi,Z:Hi,"%":Gt},S={a:je,A:Se,b:He,B:Re,c:null,d:Vt,e:Vt,f:Vi,g:ta,G:ra,H:Ri,I:zi,j:Oi,L:gn,m:Gi,M:Bi,p:Me,q:re,Q:Bt,s:Zt,S:Zi,u:qi,U:Ji,V:Xi,w:Qi,W:Ki,x:null,X:null,y:ea,Y:na,Z:ia,"%":Gt},k={a:W,A:v,b:Y,B:N,c:B,d:Rt,e:Rt,f:Ti,g:Ht,G:jt,H:zt,I:zt,j:yi,L:Mi,m:pi,M:vi,p:G,q:di,Q:Ci,s:ki,S:wi,u:li,U:fi,V:hi,w:ci,W:gi,x:le,X:Z,y:Ht,Y:jt,Z:mi,"%":bi};x.x=p(n,x),x.X=p(r,x),x.c=p(t,x),S.x=p(n,S),S.X=p(r,S),S.c=p(t,S);function p(d,C){return function(_){var g=[],E=-1,A=0,R=d.length,z,ie,Tt;for(_ instanceof Date||(_=new Date(+_));++E<R;)d.charCodeAt(E)===37&&(g.push(d.slice(A,E)),(ie=Pt[z=d.charAt(++E)])!=null?z=d.charAt(++E):ie=z==="e"?" ":"0",(Tt=C[z])&&(z=Tt(_,ie)),g.push(z),A=E+1);return g.push(d.slice(A,E)),g.join("")}}function M(d,C){return function(_){var g=Ce(1900,void 0,1),E=$(g,d,_+="",0),A,R;if(E!=_.length)return null;if("Q"in g)return new Date(g.Q);if("s"in g)return new Date(g.s*1e3+("L"in g?g.L:0));if(C&&!("Z"in g)&&(g.Z=0),"p"in g&&(g.H=g.H%12+g.p*12),g.m===void 0&&(g.m="q"in g?g.q:0),"V"in g){if(g.V<1||g.V>53)return null;"w"in g||(g.w=1),"Z"in g?(A=Ke(Ce(g.y,0,1)),R=A.getUTCDay(),A=R>4||R===0?We.ceil(A):We(A),A=wt.offset(A,(g.V-1)*7),g.y=A.getUTCFullYear(),g.m=A.getUTCMonth(),g.d=A.getUTCDate()+(g.w+6)%7):(A=Qe(Ce(g.y,0,1)),R=A.getDay(),A=R>4||R===0?Le.ceil(A):Le(A),A=Ue.offset(A,(g.V-1)*7),g.y=A.getFullYear(),g.m=A.getMonth(),g.d=A.getDate()+(g.w+6)%7)}else("W"in g||"U"in g)&&("w"in g||(g.w="u"in g?g.u%7:"W"in g?1:0),R="Z"in g?Ke(Ce(g.y,0,1)).getUTCDay():Qe(Ce(g.y,0,1)).getDay(),g.m=0,g.d="W"in g?(g.w+6)%7+g.W*7-(R+5)%7:g.w+g.U*7-(R+6)%7);return"Z"in g?(g.H+=g.Z/100|0,g.M+=g.Z%100,Ke(g)):Qe(g)}}function $(d,C,_,g){for(var E=0,A=C.length,R=_.length,z,ie;E<A;){if(g>=R)return-1;if(z=C.charCodeAt(E++),z===37){if(z=C.charAt(E++),ie=k[z in Pt?C.charAt(E++):z],!ie||(g=ie(d,_,g))<0)return-1}else if(z!=_.charCodeAt(g++))return-1}return g}function G(d,C,_){var g=s.exec(C.slice(_));return g?(d.p=h.get(g[0].toLowerCase()),_+g[0].length):-1}function W(d,C,_){var g=m.exec(C.slice(_));return g?(d.w=y.get(g[0].toLowerCase()),_+g[0].length):-1}function v(d,C,_){var g=l.exec(C.slice(_));return g?(d.w=f.get(g[0].toLowerCase()),_+g[0].length):-1}function Y(d,C,_){var g=b.exec(C.slice(_));return g?(d.m=F.get(g[0].toLowerCase()),_+g[0].length):-1}function N(d,C,_){var g=T.exec(C.slice(_));return g?(d.m=U.get(g[0].toLowerCase()),_+g[0].length):-1}function B(d,C,_){return $(d,t,C,_)}function le(d,C,_){return $(d,n,C,_)}function Z(d,C,_){return $(d,r,C,_)}function j(d){return o[d.getDay()]}function ne(d){return a[d.getDay()]}function H(d){return c[d.getMonth()]}function Pe(d){return u[d.getMonth()]}function w(d){return i[+(d.getHours()>=12)]}function X(d){return 1+~~(d.getMonth()/3)}function je(d){return o[d.getUTCDay()]}function Se(d){return a[d.getUTCDay()]}function He(d){return c[d.getUTCMonth()]}function Re(d){return u[d.getUTCMonth()]}function Me(d){return i[+(d.getUTCHours()>=12)]}function re(d){return 1+~~(d.getUTCMonth()/3)}return{format:function(d){var C=p(d+="",x);return C.toString=function(){return d},C},parse:function(d){var C=M(d+="",!1);return C.toString=function(){return d},C},utcFormat:function(d){var C=p(d+="",S);return C.toString=function(){return d},C},utcParse:function(d){var C=M(d+="",!0);return C.toString=function(){return d},C}}}var Pt={"-":"",_:" ",0:"0"},L=/^\s*\d+/,oi=/^%/,si=/[\\^$*+?|[\]().{}]/g;function D(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function ui(e){return e.replace(si,"\\$&")}function ke(e){return new RegExp("^(?:"+e.map(ui).join("|")+")","i")}function xe(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ci(e,t,n){var r=L.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function li(e,t,n){var r=L.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function fi(e,t,n){var r=L.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function hi(e,t,n){var r=L.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function gi(e,t,n){var r=L.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function jt(e,t,n){var r=L.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ht(e,t,n){var r=L.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mi(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function di(e,t,n){var r=L.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function pi(e,t,n){var r=L.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Rt(e,t,n){var r=L.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function yi(e,t,n){var r=L.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function zt(e,t,n){var r=L.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function vi(e,t,n){var r=L.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function wi(e,t,n){var r=L.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Mi(e,t,n){var r=L.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ti(e,t,n){var r=L.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function bi(e,t,n){var r=oi.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Ci(e,t,n){var r=L.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ki(e,t,n){var r=L.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Ot(e,t){return D(e.getDate(),t,2)}function xi(e,t){return D(e.getHours(),t,2)}function _i(e,t){return D(e.getHours()%12||12,t,2)}function Di(e,t){return D(1+Ue.count(te(e),e),t,3)}function fn(e,t){return D(e.getMilliseconds(),t,3)}function Ui(e,t){return fn(e,t)+"000"}function Si(e,t){return D(e.getMonth()+1,t,2)}function Ai(e,t){return D(e.getMinutes(),t,2)}function Fi(e,t){return D(e.getSeconds(),t,2)}function Ni(e){var t=e.getDay();return t===0?7:t}function Yi(e,t){return D(Ee.count(te(e)-1,e),t,2)}function hn(e){var t=e.getDay();return t>=4||t===0?ve(e):ve.ceil(e)}function $i(e,t){return e=hn(e),D(ve.count(te(e),e)+(te(e).getDay()===4),t,2)}function Ii(e){return e.getDay()}function Li(e,t){return D(Le.count(te(e)-1,e),t,2)}function Wi(e,t){return D(e.getFullYear()%100,t,2)}function Ei(e,t){return e=hn(e),D(e.getFullYear()%100,t,2)}function Pi(e,t){return D(e.getFullYear()%1e4,t,4)}function ji(e,t){var n=e.getDay();return e=n>=4||n===0?ve(e):ve.ceil(e),D(e.getFullYear()%1e4,t,4)}function Hi(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+D(t/60|0,"0",2)+D(t%60,"0",2)}function Vt(e,t){return D(e.getUTCDate(),t,2)}function Ri(e,t){return D(e.getUTCHours(),t,2)}function zi(e,t){return D(e.getUTCHours()%12||12,t,2)}function Oi(e,t){return D(1+wt.count(se(e),e),t,3)}function gn(e,t){return D(e.getUTCMilliseconds(),t,3)}function Vi(e,t){return gn(e,t)+"000"}function Gi(e,t){return D(e.getUTCMonth()+1,t,2)}function Bi(e,t){return D(e.getUTCMinutes(),t,2)}function Zi(e,t){return D(e.getUTCSeconds(),t,2)}function qi(e){var t=e.getUTCDay();return t===0?7:t}function Ji(e,t){return D(ln.count(se(e)-1,e),t,2)}function mn(e){var t=e.getUTCDay();return t>=4||t===0?we(e):we.ceil(e)}function Xi(e,t){return e=mn(e),D(we.count(se(e),e)+(se(e).getUTCDay()===4),t,2)}function Qi(e){return e.getUTCDay()}function Ki(e,t){return D(We.count(se(e)-1,e),t,2)}function ea(e,t){return D(e.getUTCFullYear()%100,t,2)}function ta(e,t){return e=mn(e),D(e.getUTCFullYear()%100,t,2)}function na(e,t){return D(e.getUTCFullYear()%1e4,t,4)}function ra(e,t){var n=e.getUTCDay();return e=n>=4||n===0?we(e):we.ceil(e),D(e.getUTCFullYear()%1e4,t,4)}function ia(){return"+0000"}function Gt(){return"%"}function Bt(e){return+e}function Zt(e){return Math.floor(+e/1e3)}var fe,dn,pn;aa({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function aa(e){return fe=ai(e),dn=fe.format,pn=fe.parse,fe.utcFormat,fe.utcParse,fe}function oa(e){return new Date(e)}function sa(e){return e instanceof Date?+e:+new Date(+e)}function yn(e,t,n,r,i,a,o,u,c,s){var h=un(),l=h.invert,f=h.domain,m=s(".%L"),y=s(":%S"),T=s("%I:%M"),U=s("%I %p"),b=s("%a %d"),F=s("%b %d"),x=s("%B"),S=s("%Y");function k(p){return(c(p)<p?m:u(p)<p?y:o(p)<p?T:a(p)<p?U:r(p)<p?i(p)<p?b:F:n(p)<p?x:S)(p)}return h.invert=function(p){return new Date(l(p))},h.domain=function(p){return arguments.length?f(Array.from(p,sa)):f().map(oa)},h.ticks=function(p){var M=f();return e(M[0],M[M.length-1],p??10)},h.tickFormat=function(p,M){return M==null?k:s(M)},h.nice=function(p){var M=f();return(!p||typeof p.range!="function")&&(p=t(M[0],M[M.length-1],p??10)),p?f(zr(M,p)):h},h.copy=function(){return sn(h,yn(e,t,n,r,i,a,o,u,c,s))},h}function ua(){return mt.apply(yn(ri,ii,te,Mt,Ee,Ue,vt,yt,pe,dn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function he(e){return function(){return e}}function ca(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new gr(t)}function la(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vn(e){this._context=e}vn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fa(e){return new vn(e)}function ha(e){return e[0]}function ga(e){return e[1]}function ma(e,t){var n=he(!0),r=null,i=fa,a=null,o=ca(u);e=typeof e=="function"?e:e===void 0?ha:he(e),t=typeof t=="function"?t:t===void 0?ga:he(t);function u(c){var s,h=(c=la(c)).length,l,f=!1,m;for(r==null&&(a=i(m=o())),s=0;s<=h;++s)!(s<h&&n(l=c[s],s,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(l,s,c),+t(l,s,c));if(m)return a=null,m+""||null}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:he(+c),u):e},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:he(+c),u):t},u.defined=function(c){return arguments.length?(n=typeof c=="function"?c:he(!!c),u):n},u.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),u):i},u.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),u):r},u}var da=lt('<div id="legend" class="svelte-4m3c52"></div>');function pa(e,t){Jt(t,!0);let n;const r=et(t,"keys",19,()=>["a","b","c","d"]),i=et(t,"palette",19,()=>["#845EC2","#D65DB1","#FF9671","#FFC75F"]);Qt(()=>{a()});function a(){Fe(n).html(null);var u=dt().domain(r()).range(i()),c=Fe(n).selectAll(".item").data(r()).enter().append("div").attr("class","itemGrp"),s=c.append("svg").attr("width",85).attr("height",14);s.append("circle").attr("cx",7).attr("cy",7).attr("r",7).style("fill",function(h){return u(h)}),s.append("text").attr("x",20).attr("y",8).style("fill",function(h){return u(h)}).text(function(h){return h}).attr("text-anchor","left").style("alignment-baseline","middle")}var o=da();Kt(o,u=>n=u,()=>n),ct(e,o),Xt()}var ya=lt('<div class="canvas svelte-10b9gx4"><h1>Relative Change in Radiance of Major Metropolitan Cities in Africa 2012-2023</h1>  <!> <div id="vis"></div> <p class="caption svelte-10b9gx4">Graphic: Mindy Ng. This visualization was created using d3.js. Read more about the data processing below.</p></div>');function qt(e,t){Jt(t,!0);const n=et(t,"excludedValues",19,()=>[]);let r,i=_n(ze(["x","y","z"]));Dn(()=>console.log("categories update:"+ae(i)));const a=["#960033","#D24261","#ACD7FF","#3175DB","#0046A3","#002A80"];let o=[],u=1500,c=600;const s={top:30,right:20,bottom:30,left:50},h="#919492",l="1.8rem",f=pn("%Y");Qt(()=>{m()});function m(){Fe(r).html(null),Cr(`${me}/data/YEARLY_AVG_RAD_MINMAX_LONG.csv`,b=>({year:f(b.year),city:b.city,avg_rad:+b.avg_rad})).then(function(b){console.log(b);let F=[];b.forEach(w=>F.push(w.year)),console.log(Dt(F));const x=Dt(F)??new Date(2012,1),S=Gn(F)??new Date(2023,1);let k=ua().domain([x,S]).range([s.left,u-s.right]),p=cn().domain([0,1]).range([c-s.bottom,s.top]);const M=Fe(r).append("svg").attr("width",u).attr("height",c).attr("viewBox",[0,0,u,c]).attr("style","max-width: 100%; height: auto; overflow: visible;"),$=M.append("g").attr("transform",`translate(0,${c-s.bottom})`).call(tr(k).ticks(u/80).tickSizeOuter(0)).call(w=>w.select(".domain").remove()),G=M.append("g").call(nr(p).tickSize(-u)).call(w=>w.select(".domain").remove()).call(w=>w.append("text").attr("x",10).attr("y",30).attr("fill","currentColor").attr("text-anchor","start").text("Relative Radiance Change")).style("font-size",l);G.selectAll("text").style("font-size",l).style("fill",h).attr("dy","-0.5em").attr("dx","1.5em"),$.selectAll("text").style("font-size",l).style("fill",h),G.selectAll("line").style("stroke",h),$.selectAll("line").style("stroke",h);const W=b.map(w=>[w.year,w.avg_rad,w.city]),v=jn(W,w=>Object.assign(w,{z:w[0][2]}),w=>w[2]);let Y=Array.from(v.entries()).sort((w,X)=>w[1][11][1]-w[1][0][1]-(X[1][11][1]-X[1][0][1]));Ct(i,ze(Y.map(([w])=>w)));let N={};Y.forEach((w,X)=>N[ae(i)[X]]=a[X]),Ct(i,ze(ae(i).filter(w=>!n().includes(w)))),ae(i).forEach(w=>o.push(N[w]));var B=dt().domain(ae(i)).range(o);const le=ma().x(w=>k(w[0])).y(w=>p(w[1])),Z=M.append("g").attr("fill","none").attr("stroke-width",5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(v.values().filter(w=>!n().includes(w[0][2]))).join("path").style("mix-blend-mode","multiply").attr("d",le).attr("stroke",w=>B(w[0][2])),j=M.append("g").attr("display","none");return j.append("circle").attr("r",0),j.append("text").attr("text-anchor","middle").attr("font-size","1.8rem").attr("y",-20),M.on("pointerenter",H).on("pointermove",ne).on("pointerleave",Pe).on("touchstart",w=>w.preventDefault()),M.node();function ne(w){const[X,je]=ir(w),Se=Zn(W,([re,d])=>Math.hypot(k(re)-X,p(d)-je))??0,[He,Re,Me]=W[Se];Z.style("stroke",({z:re})=>re===Me?null:"#ddd").filter(({z:re})=>re===Me).raise(),j.attr("transform",`translate(${k(He)},${p(Re)})`),j.select("text").text(Me),M.property("value",b[Se])}function H(){Z.style("mix-blend-mode",null).style("stroke","#ddd"),j.attr("display",null)}function Pe(){Z.style("mix-blend-mode","multiply").style("stroke",null),j.attr("display","none")}})}var y=ya(),T=O(q(y),2);An(T,()=>ae(i),b=>{pa(b,{get keys(){return ae(i)},palette:o})});var U=O(T,2);Kt(U,b=>r=b,()=>r),ge(2),J(y),ct(e,y),Xt()}var va=lt(`<main class="svelte-13sw385"><div class="article-cover svelte-13sw385"><img class="cover-photo" alt="[Bar chart of hours shed by Eskom by year 2014-2023]"> <p class="source-info svelte-13sw385"><i>Gauteng, South Africa, 2016. (VIIRS DNB)</i></p></div> <div class="article-body svelte-13sw385"><h1>The Dark Divide</h1> <h2>Using nighttime lights to study disparities in energy access amidst the energy crisis in South Africa</h2> <h4>By: Mindy Ng</h4> <h5><i>October 1, 2024</i></h5> <section class="svelte-13sw385"><p class="svelte-13sw385">One of my favorite things about flying at night is looking down on a city from the window and seeing the shape, motion, and pulse of a city illuminated solely by streetlamps, car headlights, and households burning the midnight oil.</p> <p class="svelte-13sw385">There are some pretty incredible insights you can learn about cities just by viewing them from above when it's dark. As the availability and quality of satellite imagery has grown over the past few decades, researchers have been able to use aerial nighttime images to study urban development and economic growth in urban contexts. In general, it has been observed that nighttime lights in major metropolitan cities grow brighter as they experience economic development over time, attributed to the expansion of new infrastructure and overall increased electrification.</p> <p class="svelte-13sw385">The chart below uses satellite-based nighttime lights data (VIIRS day/night band from the National Oceanic and Atmospheric Administration (NOAA)) to show the radiance of four major metropolitan cities in West and East Africa that have grown economically in the last decade: Nairobi, Lagos, Addis Ababa, and Dar Es Salaam.</p></section> <section class="svelte-13sw385"><!></section> <section class="svelte-13sw385"><h3>But what can nighttime lights show us about cities experiencing electricity disruptions?</h3> <p class="svelte-13sw385">Since 2007, South Africa has been experiencing an increasingly worsening energy crisis, largely caused by the national energy supplier, Eskom. Citing failing infrastructure, corruption, and poor management, the country currently experiences rolling blackouts (aka “load shedding”) on a near-daily basis.</p> <div class="article-img-container svelte-13sw385"><img class="article-img svelte-13sw385" alt="[Bar chart of hours shed by Eskom by year 2014-2023]"></div> <p class="svelte-13sw385">The first load shedding instances occurred sparsely in 2007/2008 and 2014/2015, but since 2018, the frequency and length of these blackouts have increasingly worsened at an unprecedented rate (Nico, 2023). The bar chart above shows the amount of Gigawatt hours that have been shed each year, revealing that by May, the year 2023 had already seen almost as much load shedding as in all of 2022.</p></section> <section class="svelte-13sw385"><p class="svelte-13sw385">Below, we add the radiance lines for Johannesburg and Cape Town, South Africa's two largest cities. We see that all of the other cities with comparable population growth, GDP, and size, radiance are increasing consistently. Johannesburg and Cape Town follow the same upward trajectory until 2018 (the year then load shedding was implemented at an unprecedented rate), where we start to see a downward trend. The radiance continues to decline each year, corresponding to increasing amounts of loadshedding.</p> <!> <p class="svelte-13sw385">These energy disruptions have led to significant obstacles for South Africa, including a stagnation of GDP growth: These energy disruptions have led to significant obstacles for South Africa, including a stagnation of GDP growth: In 2023, <a href="https://data.worldbank.org/indicator/NY.GDP.MKTP.KD.ZG?locations=ZA" target="_blank" rel="noopener noreferrer">South Africa’s GDP grew 0.6% compared to 4.7% in 2021</a>.
            Small businesses that are unable to afford back up generators lose key hours of business, and have been forced to shut (Mangara and Mutsaa, 2023), further driving up rates of unemployment, which is close to an all time high at <a href="https://www.imf.org/en/News/Articles/2023/06/15/cf-south-africas-economy-loses-momentum-amid-record-power-cuts#:~:text=South%20Africa's%20Economy%20Loses%20Momentum%20Amid%20Record%20Power%20Cuts,-By%20the%20South&amp;text=By%20year%2Dend%2C%20we%20project,to%20an%20all%2Dtime%20high." target="_blank" rel="noopener noreferrer">32.9%</a>. It has <a href="https://inclusivecities.ukzn.ac.za/blog/tri-fold-impact-of-load-shedding-in-south-african-cities-power-outage-destruction-and-regression/" target="_blank" rel="noopener noreferrer">impacts on various sectors</a> that require stable energy to operate, including healthcare, manufacturing, transportation, agriculture, and IT (Mangara and Mutsaa, 2023). It deepens the <a href="https://www.globalcitizen.org/en/content/south-africa-power-cuts-digital-divide-poverty/" target="_blank" rel="noopener noreferrer">digital divide</a>, curtailing access to the internet and technology, which can in turn threaten job security and disrupt education. The use of backup diesel generators are affecting air quality, contributing to the climate crisis and damages to individual health.</p> <p class="svelte-13sw385">While load shedding is supposed to be implemented equitably across the region, evidence suggests these effects are not felt evenly. <a href="https://www.gcro.ac.za/outputs/vignettes/detail/accessing-alternative-water-and-electricity-sources-and-justice/" target="_blank" rel="noopener noreferrer">Who can afford back-up generators? Who can afford to install solar panels?</a> <b>To what extent is the energy crisis is widening the already existing wealth gap and racial divide leftover from apartheid years.</b></p></section> <section class="svelte-13sw385"><h3>Further reading</h3> <p class="svelte-13sw385">In my <a href="https://drive.google.com/file/d/1YBEmzMX9Q9pw6p-kUQRFCj6mnwqJjY6d/view?usp=sharing" target="_blank" rel="noopener noreferrer">Master’s dissertation</a>, I break down the analysis of radiance change across the Gauteng province (where Johannesburg is located) at a more granular level, looking at the effects of average household income, race, and other spatial qualities on radiance change, to understand which areas and which residents are experiencing disproportionate effects of load shedding, and to what extent. I also look at where solar off-griding is occurring to what extent it shields these neighborhoods from experiencing radiance decline.</p> <h4>Preview of visualizations:</h4> <div class="article-img-container svelte-13sw385"><img class="article-img svelte-13sw385" alt="Radiance Change in Gauteng [2016-2023]"> <img class="article-img svelte-13sw385" alt="Radiance Change in Gauteng with former township boundaries overlaid [2016-2023]"> <img class="article-img svelte-13sw385" alt="Income index, Population, solar panel presence, % of white residents (2020)"></div> <p class="svelte-13sw385">These maps plot various variables including Neighborhood Lifestyle Index (an income-level index, 10 - very high-income, 1 - very low-income), population density, percentage of white residents, and presence of solar panels within hexagonal spatial units with an area of 0.103755 km2. A quick glance at these maps reveals the highly racially and economically segregated nature of Gauteng. The former township boundaries from apartheid very much still exist and correspond heavily with race, income, population density. <b>Overall, we can see that these lower-income, high population density, majority non-white areas – especially those located within former townships – are experiencing the highest degrees of radiance decline from energy disruptions.</b></p></section> <section class="svelte-13sw385"><h3>More about the data:</h3> <p class="svelte-13sw385">This study uses the average radiance band which contains an average of the nightly radiances in that month for each pixel in nanoWatts/sr/cm^2. This study uses monthly composites from January 2016 to April 2023. Images impacted by cloud-cover, stray light, lunar illuminance are filtered out before averaging, meaning that some months' averages may be based on fewer observations than others. Images are taken around 1 or 2 AM each night. To account for seasonal annual cycling fluctuations, a yearly average radiance is calculated using these monthly composites.</p> <p class="svelte-13sw385">Since each city has different starting brightness levels due to factors like population size and development, I adjust the data using a method called min-max normalization. This process scales the brightness for each city between 0 and 1, making it easier to compare how the brightness changes relatively over time for all cities on the same chart.</p></section></div></main>`);function _a(e){var t=va(),n=q(t),r=q(n);Te(r,"src",`${me??""}/assets/SACoverPhoto.png`),ge(2),J(n);var i=O(n,2),a=O(q(i),10),o=q(a);qt(o,{excludedValues:["Johannesburg","Cape Town"]}),J(a);var u=O(a,2),c=O(q(u),4),s=q(c);Te(s,"src",`${me??""}/assets/SABarChartEskom.png`),J(c),ge(2),J(u);var h=O(u,2),l=O(q(h),2);qt(l,{}),ge(4),J(h);var f=O(h,2),m=O(q(f),6),y=q(m);Te(y,"src",`${me??""}/assets/radchangeNEW.png`);var T=O(y,2);Te(T,"src",`${me??""}/assets/radchangetownshipsNEW.png`);var U=O(T,2);Te(U,"src",`${me??""}/assets/explorationmaps.svg`),J(m),ge(2),J(f),ge(2),J(i),J(t),ct(e,t)}export{_a as component};
