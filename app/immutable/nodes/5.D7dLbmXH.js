import{a as q,t as F}from"../chunks/disclose-version.DLAPnD8a.js";import{Y as fe,h as U,ad as pe,au as me,aq as ve,_ as ye,a0 as be,U as we,p as Q,n as H,at as xe,A as Z,i as A,v as p,o as m,a1 as T,s as v}from"../chunks/runtime.DDvq2xj7.js";import{s as E}from"../chunks/attributes.594Jl3nh.js";import{p as L,a as R}from"../chunks/props.WBnwcpBY.js";import{b as $}from"../chunks/this.BknO5kmY.js";import{o as ee}from"../chunks/index-client.roizNe2p.js";import{s as P}from"../chunks/transform.aGOf7qKH.js";import{I as ke,a as Ae,P as _e,o as te,t as Te,c as Se,m as Ie,b as Ce,d as Ee,l as De,e as Me,f as Ge}from"../chunks/time.IlbDDNFl.js";import{b as S}from"../chunks/paths.BJMMFs9-.js";function Pe(e,t,i){U&&pe();var n=e,s=we,a;fe(()=>{me(s,s=t())&&(a&&ve(a),a=ye(()=>i(n)))}),U&&(n=be)}function ze(e){return e}function Ne(e,t,...i){return je(e,ze,t,i)}function je(e,t,i,n){return function s(a,d){if(d>=n.length)return i(a);const l=new ke,o=n[d++];let h=-1;for(const c of a){const g=o(c,++h,a),u=l.get(g);u?u.push(c):l.set(g,[c])}for(const[c,g]of l)l.set(c,s(g,d));return t(l)}(e,0)}function Be(e,t){let i,n=-1,s=-1;if(t===void 0)for(const a of e)++s,a!=null&&(i>a||i===void 0&&a>=a)&&(i=a,n=s);else for(let a of e)(a=t(a,++s,e))!=null&&(i>a||i===void 0&&a>=a)&&(i=a,n=s);return n}function Re(e,t=Ae){if(t.length===1)return Be(e,t);let i,n=-1,s=-1;for(const a of e)++s,(n<0?t(a,a)===0:t(a,i)<0)&&(i=a,n=s);return n}function Le(e){let t;for(;t=e.sourceEvent;)e=t;return e}function qe(e,t){if(e=Le(e),t===void 0&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}function _(e){return function(){return e}}function Fe(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const n=Math.floor(i);if(!(n>=0))throw new RangeError(`invalid digits: ${i}`);t=n}return e},()=>new _e(t)}function Ve(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ae(e){this._context=e}ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ye(e){return new ae(e)}function Oe(e){return e[0]}function We(e){return e[1]}function Je(e,t){var i=_(!0),n=null,s=Ye,a=null,d=Fe(l);e=typeof e=="function"?e:e===void 0?Oe:_(e),t=typeof t=="function"?t:t===void 0?We:_(t);function l(o){var h,c=(o=Ve(o)).length,g,u=!1,y;for(n==null&&(a=s(y=d())),h=0;h<=c;++h)!(h<c&&i(g=o[h],h,o))===u&&((u=!u)?a.lineStart():a.lineEnd()),u&&a.point(+e(g,h,o),+t(g,h,o));if(y)return a=null,y+""||null}return l.x=function(o){return arguments.length?(e=typeof o=="function"?o:_(+o),l):e},l.y=function(o){return arguments.length?(t=typeof o=="function"?o:_(+o),l):t},l.defined=function(o){return arguments.length?(i=typeof o=="function"?o:_(!!o),l):i},l.curve=function(o){return arguments.length?(s=o,n!=null&&(a=s(n)),l):s},l.context=function(o){return arguments.length?(o==null?n=a=null:a=s(n=o),l):n},l}var Xe=F('<div id="legend" class="svelte-1qbenv2"></div>');function Ue(e,t){Q(t,!0);let i;const n=L(t,"keys",19,()=>["a","b","c","d"]),s=L(t,"palette",19,()=>["#845EC2","#D65DB1","#FF9671","#FFC75F"]);ee(()=>{a()});function a(){P(i).html(null);var l=te().domain(n()).range(s()),o=P(i).selectAll(".item").data(n()).enter().append("div").attr("class","itemGrp"),h=o.append("svg").attr("width",85).attr("height",14);h.append("circle").attr("cx",7).attr("cy",7).attr("r",7).style("fill",function(c){return l(c)}),h.append("text").attr("x",20).attr("y",8).style("fill",function(c){return l(c)}).text(function(c){return c}).attr("text-anchor","left").style("alignment-baseline","middle")}var d=Xe();$(d,l=>i=l,()=>i),q(e,d),H()}var Ze=F('<div class="canvas svelte-10b9gx4"><h1>Relative Change in Radiance of Major Metropolitan Cities in Africa 2012-2023</h1>  <!> <div id="vis"></div> <p class="caption svelte-10b9gx4">Graphic: Mindy Ng. This interactive line chart was created using d3.js. Read more about the data below.</p></div>');function K(e,t){Q(t,!0);const i=L(t,"excludedValues",19,()=>[]);let n,s=xe(R(["x","y","z"]));const a=["#960033","#D24261","#ACD7FF","#3175DB","#0046A3","#002A80"];let d=[],l=1500,o=600;const h={top:30,right:20,bottom:30,left:50},c="#919492",g="1.8rem",u=Te("%Y");ee(()=>{y()});function y(){P(n).html(null),Se(`${S}/data/YEARLY_AVG_RAD_MINMAX_LONG.csv`,f=>({year:u(f.year),city:f.city,avg_rad:+f.avg_rad})).then(function(f){console.log(f);let D=[];f.forEach(r=>D.push(r.year));const ne=Ie(D)??new Date(2012,1),ie=Ce(D)??new Date(2023,1);let M=Ee().domain([ne,ie]).range([h.left,l-h.right]),G=De().domain([0,1]).range([o-h.bottom,h.top]);const b=P(n).append("svg").attr("width",l).attr("height",o).attr("viewBox",[0,0,l,o]).attr("style","max-width: 100%; height: auto; overflow: visible;"),V=b.append("g").attr("transform",`translate(0,${o-h.bottom})`).call(Me(M).ticks(l/80).tickSizeOuter(0)).call(r=>r.select(".domain").remove()),Y=b.append("g").call(Ge(G).tickSize(-l)).call(r=>r.select(".domain").remove()).call(r=>r.append("text").attr("x",10).attr("y",30).attr("fill","currentColor").attr("text-anchor","start").text("Relative Radiance Change")).style("font-size",g);Y.selectAll("text").style("font-size",g).style("fill",c).attr("dy","-0.5em").attr("dx","1.5em"),V.selectAll("text").style("font-size",g).style("fill",c),Y.selectAll("line").style("stroke",c),V.selectAll("line").style("stroke",c);const N=f.map(r=>[r.year,r.avg_rad,r.city]),O=Ne(N,r=>Object.assign(r,{z:r[0][2]}),r=>r[2]);let W=Array.from(O.entries()).sort((r,w)=>r[1][11][1]-r[1][0][1]-(w[1][11][1]-w[1][0][1]));Z(s,R(W.map(([r])=>r)));let J={};W.forEach((r,w)=>J[A(s)[w]]=a[w]),Z(s,R(A(s).filter(r=>!i().includes(r)))),A(s).forEach(r=>d.push(J[r]));var re=te().domain(A(s)).range(d);const se=Je().x(r=>M(r[0])).y(r=>G(r[1])),j=b.append("g").attr("fill","none").attr("stroke-width",5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data([...O.values()].filter(r=>!i().includes(r[0][2]))).join("path").style("mix-blend-mode","multiply").attr("d",se).attr("stroke",r=>re(r[0][2])),k=b.append("g").attr("display","none");return k.append("circle").attr("r",0),k.append("text").attr("text-anchor","middle").attr("font-size","1.8rem").attr("y",-20),b.on("pointerenter",le).on("pointermove",oe).on("pointerleave",ce).on("touchstart",r=>r.preventDefault()),b.node();function oe(r){const[w,he]=qe(r),X=Re(N,([C,ue])=>Math.hypot(M(C)-w,G(ue)-he))??0,[de,ge,B]=N[X];j.style("stroke",({z:C})=>C===B?null:"#ddd").filter(({z:C})=>C===B).raise(),k.attr("transform",`translate(${M(de)},${G(ge)})`),k.select("text").text(B),b.property("value",f[X])}function le(){j.style("mix-blend-mode",null).style("stroke","#ddd"),k.attr("display",null)}function ce(){j.style("mix-blend-mode","multiply").style("stroke",null),k.attr("display","none")}})}var x=Ze(),I=p(m(x),2);Pe(I,()=>A(s),f=>{Ue(f,{get keys(){return A(s)},palette:d})});var z=p(I,2);$(z,f=>n=f,()=>n),T(2),v(x),q(e,x),H()}var Ke=F(`<main class="svelte-gr7g42"><div class="article-cover svelte-gr7g42"><img class="cover-photo" alt="[Bar chart of hours shed by Eskom by year 2014-2023]"> <p class="source-info svelte-gr7g42"><i>Gauteng, South Africa, 2016. (VIIRS DNB)</i></p></div> <div class="article-body svelte-gr7g42"><h1>The Dark Divide</h1> <h2>Using nighttime lights to study disparities in energy access amidst the energy crisis in South Africa</h2> <h4>By: Mindy Ng</h4> <h5><i>October 1, 2024</i></h5> <section class="svelte-gr7g42"><p class="svelte-gr7g42">One of my favorite things about flying at night is looking down on a city from the window and seeing the shape, motion, and pulse of a city illuminated solely by streetlamps, car headlights, and households burning the midnight oil.</p> <p class="svelte-gr7g42">There are some pretty incredible insights you can learn about cities just by viewing them from above when it's dark. As the availability and quality of satellite imagery has grown over the past few decades, researchers have been able to use aerial nighttime images to study urban development and economic growth in urban contexts. In general, it has been observed that nighttime lights in major metropolitan cities grow brighter as they experience economic development over time, attributed to the expansion of new infrastructure and overall increased electrification.</p> <p class="svelte-gr7g42">The chart below uses satellite-based nighttime lights data (VIIRS day/night band from the National Oceanic and Atmospheric Administration (NOAA)) to show the radiance of four major metropolitan cities in West and East Africa that have grown economically in the last decade: Nairobi, Lagos, Addis Ababa, and Dar Es Salaam.</p></section> <section class="svelte-gr7g42"><!></section> <section class="svelte-gr7g42"><h3>But what can nighttime lights show us about cities experiencing electricity disruptions?</h3> <p class="svelte-gr7g42">Since 2007, South Africa has been experiencing an increasingly worsening energy crisis, largely caused by the national energy supplier, Eskom. Citing failing infrastructure, corruption, and poor management, the country currently experiences rolling blackouts (aka “load shedding”) on a near-daily basis.</p> <div class="article-img-container svelte-gr7g42"><img class="article-img svelte-gr7g42" alt="[Bar chart of hours shed by Eskom by year 2014-2023]"></div> <p class="svelte-gr7g42">The first load shedding instances occurred sparsely in 2007/2008 and 2014/2015, but since 2018, the frequency and length of these blackouts have increasingly worsened at an unprecedented rate (Nico, 2023). The bar chart above shows the amount of Gigawatt hours that have been shed each year, revealing that by May, the year 2023 had already seen almost as much load shedding as in all of 2022.</p></section> <section class="svelte-gr7g42"><p class="svelte-gr7g42">Below, we add the radiance lines for Johannesburg and Cape Town, South Africa's two largest cities. We see that all of the other cities with comparable population growth, GDP, and size, radiance are increasing consistently. Johannesburg and Cape Town follow the same upward trajectory until 2018 (the year then load shedding was implemented at an unprecedented rate), where we start to see a downward trend. The radiance continues to decline each year, corresponding to increasing amounts of loadshedding.</p> <!> <p class="svelte-gr7g42">These energy disruptions have led to significant obstacles for South Africa, including a stagnation of GDP growth: These energy disruptions have led to significant obstacles for South Africa, including a stagnation of GDP growth: In 2023, <a href="https://data.worldbank.org/indicator/NY.GDP.MKTP.KD.ZG?locations=ZA" target="_blank" rel="noopener noreferrer">South Africa’s GDP grew 0.6% compared to 4.7% in 2021</a>.
            Small businesses that are unable to afford back up generators lose key hours of business, and have been forced to shut (Mangara and Mutsaa, 2023), further driving up rates of unemployment, which is close to an all time high at <a href="https://www.imf.org/en/News/Articles/2023/06/15/cf-south-africas-economy-loses-momentum-amid-record-power-cuts#:~:text=South%20Africa's%20Economy%20Loses%20Momentum%20Amid%20Record%20Power%20Cuts,-By%20the%20South&amp;text=By%20year%2Dend%2C%20we%20project,to%20an%20all%2Dtime%20high." target="_blank" rel="noopener noreferrer">32.9%</a>. It has <a href="https://inclusivecities.ukzn.ac.za/blog/tri-fold-impact-of-load-shedding-in-south-african-cities-power-outage-destruction-and-regression/" target="_blank" rel="noopener noreferrer">impacts on various sectors</a> that require stable energy to operate, including healthcare, manufacturing, transportation, agriculture, and IT (Mangara and Mutsaa, 2023). It deepens the <a href="https://www.globalcitizen.org/en/content/south-africa-power-cuts-digital-divide-poverty/" target="_blank" rel="noopener noreferrer">digital divide</a>, curtailing access to the internet and technology, which can in turn threaten job security and disrupt education. The use of backup diesel generators are affecting air quality, contributing to the climate crisis and damages to individual health.</p> <p class="svelte-gr7g42">While load shedding is supposed to be implemented equitably across the region, evidence suggests these effects are not felt evenly. <a href="https://www.gcro.ac.za/outputs/vignettes/detail/accessing-alternative-water-and-electricity-sources-and-justice/" target="_blank" rel="noopener noreferrer">Who can afford back-up generators? Who can afford to install solar panels?</a> <b>To what extent is the energy crisis is widening the already existing wealth gap and racial divide leftover from apartheid years.</b></p></section> <section class="svelte-gr7g42"><h3>Further reading</h3> <p class="svelte-gr7g42">In my <a href="https://drive.google.com/file/d/1YBEmzMX9Q9pw6p-kUQRFCj6mnwqJjY6d/view?usp=sharing" target="_blank" rel="noopener noreferrer">Master’s dissertation</a>, I break down the analysis of radiance change across the Gauteng province (where Johannesburg is located) at a more granular level, looking at the effects of average household income, race, and other spatial qualities on radiance change, to understand which areas and which residents are experiencing disproportionate effects of load shedding, and to what extent. I also look at where solar off-griding is occurring to what extent it shields these neighborhoods from experiencing radiance decline.</p> <h4>Preview of visualizations:</h4> <div class="article-img-container svelte-gr7g42"><img class="article-img svelte-gr7g42" alt="Radiance Change in Gauteng [2016-2023]"> <img class="article-img svelte-gr7g42" alt="Radiance Change in Gauteng with former township boundaries overlaid [2016-2023]"> <img class="article-img svelte-gr7g42" alt="Income index, Population, solar panel presence, % of white residents (2020)"></div> <p class="svelte-gr7g42">These maps plot various variables including Neighborhood Lifestyle Index (an income-level index, 10 - very high-income, 1 - very low-income), population density, percentage of white residents, and presence of solar panels within hexagonal spatial units with an area of 0.103755 km2. A quick glance at these maps reveals the highly racially and economically segregated nature of Gauteng. The former township boundaries from apartheid very much still exist and correspond heavily with race, income, population density. <b>Overall, we can see that these lower-income, high population density, majority non-white areas – especially those located within former townships – are experiencing the highest degrees of radiance decline from energy disruptions.</b></p></section> <section class="svelte-gr7g42"><h3>More about the data:</h3> <p class="svelte-gr7g42">This study uses the average radiance band which contains an average of the nightly radiances in that month for each pixel in nanoWatts/sr/cm^2. This study uses monthly composites from January 2016 to April 2023. Images impacted by cloud-cover, stray light, lunar illuminance are filtered out before averaging, meaning that some months' averages may be based on fewer observations than others. Images are taken around 1 or 2 AM each night. To account for seasonal annual cycling fluctuations, a yearly average radiance is calculated using these monthly composites.</p> <p class="svelte-gr7g42">Since each city has different starting brightness levels due to factors like population size and development, I adjust the data using a method called min-max normalization. This process scales the brightness for each city between 0 and 1, making it easier to compare how the brightness changes relatively over time for all cities on the same chart.</p></section></div></main>`);function st(e){var t=Ke(),i=m(t),n=m(i);E(n,"src",`${S??""}/assets/SACoverPhoto.png`),T(2),v(i);var s=p(i,2),a=p(m(s),10),d=m(a);K(d,{excludedValues:["Johannesburg","Cape Town"]}),v(a);var l=p(a,2),o=p(m(l),4),h=m(o);E(h,"src",`${S??""}/assets/SABarChartEskom.png`),v(o),T(2),v(l);var c=p(l,2),g=p(m(c),2);K(g,{}),T(4),v(c);var u=p(c,2),y=p(m(u),6),x=m(y);E(x,"src",`${S??""}/assets/radchangeNEW.png`);var I=p(x,2);E(I,"src",`${S??""}/assets/radchangetownshipsNEW.png`);var z=p(I,2);E(z,"src",`${S??""}/assets/explorationmaps.svg`),v(y),T(2),v(u),T(2),v(s),v(t),q(e,t)}export{st as component};
